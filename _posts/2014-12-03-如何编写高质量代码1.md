---
layout : life
title : "敲门篇之Java开发常用的方法和准则"
category : 编写高质量代码
duoshuo: true
date : 2014-12-03
---

--------------------

* **不要在常量和变量中出现易混淆的字母**。
 * 包名要全小写。
 * 类名首字母大写。
 * 常量大写要用下划线分割。
 * 变量采用**驼峰命名法**命名。
 * 不要出现以下容易混淆的情况：int a=1l;//数字1和字母l长的很相像，很容易混淆。
* **常量务必编译时初始化**
 * 常量务必在编译时就初始化，不要出现以下情况。
 * public static final int RAND_CONST=new Random().nextInt();
 * 以上情况会导致程序的可读性很差，常量就是常量，应该在编译时就初始化。
* **三目运算符的类型务必一致**
 * 类型不一致返回结果可能会有错误出现，默认类型转换时会出现一些异常。
* **避免带有变长参数的方法重载**
 * public void add(int a, int b);
 * public void add(int a, int b, int c...);
 *当输入为2,2时，就会存在二义性，到底调用哪一个函数。
* **null值和空值威胁变长方法**
 * public void method(String str,String strs);
 * public void method(String str,int d);
 * 调用以上方法时，method("temp");该调用哪一个会出现二义性。
* **覆写变长方法也循规蹈矩**
 * 参数列表必须与重写方法一致。
 * 重写方法不能缩小访问权限。
 * 返回类型必须与被重写方法的相同。
 * 重写不能抛出异常或者超出父类的异常，但是可以抛出更少，更有限的异常，或者不抛出异常。
* **自增陷阱要注意**
 * count=count++; count值不发生变化
 * count+=1; count值+1;
* **不要让旧语法困扰你**
 * 以前写过的代码可能会带有原来旧的语法规则，当你看不懂代码的时候，就选择不去看它，让它永远保留。
* **静态导入要少用**
 * JDK5引入静态导入语法，目的是减少字符输入量，提高可阅读性，以便更好的理解程序。
 * 静态导入要遵循两个原则：
  * 不适用*通配符，除非是导入静态常量类。
  * 方法名时具有明确的清晰表象意义的工具类。
  * junit中的assertEquals方法，见名知意就知道是用来判断两个值是否相等的。
* **不要在本类中覆盖静态导入的变量和方法**
 * 如果要变更一个被静态类导入的方法，最好的办法是在原始类中重构，而不是在本类中覆盖。
 * 编译器有一个“最短路径”原则，如果能在本类中找到变量，常量，方法就不会去其他包或者父类，接口中查找，确保本包优先。
* **显示声明UID,养成好习惯**
 * 实现了Serializable接口的类，需要增加一个Serial Version ID，目的是实现可持久化，比如网络传输，本地存储，系统的分布和异构部署，提供先决条件，没有序列化，远程调用，对象数据库就不会存在。
 * 显示声明serialVersionUID可以避免对象不一致。。
 * **在序列化的时候，不适用构造函数为final变量赋值**：反序列化不会执行构造函数。。
* **final变量不要太复杂**
 * 反序列化时，final变量在一下情况不会重新赋值
  * 通过构造方法为final变量赋值
  * 通过方法返回值为final变量赋值。
  * final修饰的属性不是基本类型
* **switch**语句break不能忘**
* **易变业务用脚本**
 * 脚本语言三大特性
  * 灵活，动态类型，不用声明变量直接使用，可以运行时改变类型
  * 便捷,不需要编译成二进制代码，不需要生成字节码。
  * 简单，语言没有太多的技术门槛。
 * 脚本语言对系统设计的有利条件：**随时可以发布而不用重新部署**。
* **慎用动态编译**
 * java6支持动态编译，可以在运行时直接编译.java文件，执行.class获得相关的输入输出。
 * 动态编译有更好的替代方案：JRuby,Groovy等无缝脚本。
 * 在框架中慎用，动态注入到Spring容器中需要花费很大功夫。 
 * 高性能项目中时不能使用，多了一个编译过程，需要花费时间。
 * 动态编译考虑安全问题。
* **instanceof预期结果多样性**
 * null instanceof Object :false ,若左操作数为null，直接返回false,不用考虑右操作数。
 * 'A' instanceof Character:false ，A是一个char类型。 
 * new Date() instanceof String： 编译通不过，Date类和String没有继承或者实现关系，编译时直接报错。
 
-----------------------------

