---
layout : life
title : "java性能优化之概述"
category : java性能优化
duoshuo: true
date : 2014-11-24
---

------------

###程序的性能通过这些方面体现：

-----------

* **执行速度**:程序的反应是否迅速，响应时间是否足够短。
* **内存分配**:内存的分配是否合理，是否过多的小号内存或者存在泄露。
* **启动时间**:程序从运行到可以正常的处理业务需要多长时间。
* **负载承受能力**:当系统压力上升时，系统的执行时间，响应时间的上升曲线是否平缓。

-------------

###性能的参考指标

--------------

* **执行时间**:代码从开始运行到运行结束所使用的时间。
* **CPU时间**：函数或者线程占据CPU的时间
* **内存分配**：程序在运行时占用的内存空间。
* **磁盘吞吐量**：描述I/O的使用情况。
* **网络吞吐量**：描述网络的使用情况。
* **响应时间**：系统对某些用户行为或者事件做出响应的时间，时间越短，性能越好。

------------------

###木桶原理与性能瓶颈

---------------

* **木桶原理**：一只水桶能盛多少水不取决于最长的最高的那块木板，而是取决于桶壁上那块最短的木板。
 * 也就是说在优化整个系统的时候，当系统拥有足够的内存资源和CPU资源，如果磁盘I/O性能低下，系统的整体性能取决于磁盘I/O,我们要优化系统，提升系统性能应该提升磁盘I/O性能。

* **最可能成为系统瓶颈的资源**：
 * **磁盘I/O**:读写速度比内存慢得多，如果要等待磁盘I/O完成，低下的I/O操作会拖累整个系统。
 * **网络操作**：对互联网的数据的读写，网络操作的速度可能比本地磁盘I/O更慢。
 * **CPU**:对计算机资源要求较高的程序，长时间不间断的大量占用CPU资源，对CPU的争夺导致性能问题。科学计算，3D渲染。
 * **异常**：java应用异常的捕获和处理是非常消耗资源的。
 * **数据库**：大部分应用程序都离不开数据库，海量数据的读写操作是相当费时，应用程序需要等待数据库操作或者返回请求结果，同步操作将成为系统的瓶颈。
 * **锁争用**：高并发程序，存在激烈的锁竞争。
 * **内存**：内存不足导致。
 
-------------------

###Amdahl定理

-----------------

* 加速比=优化前系统的耗时/优化后的系统耗时  
 * 加速比越高，说明我们的优化程度好。
* 加速比 S<=1/(F+(1-F/N))       F:串行化比重.  N:Cpu核数
* **提示**：
 * 当我们的CUP核数无限增大的时候，加速比和我们的串行化比重成反比关系.
 * 一个系统要提高我们的加速比，光提高cpu的核数没有太大的效果，应该提高一个系统并行化的程度